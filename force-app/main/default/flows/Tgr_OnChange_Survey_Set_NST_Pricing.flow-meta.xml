<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>63.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Not</name>
        <label>Not NST Pricing Tenor</label>
        <locationX>446</locationX>
        <locationY>4127</locationY>
        <assignmentItems>
            <assignToReference>flag_tenor</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_effstdsesuai</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Is_Tenor_Sesuai.rate__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Is_Tenor_Sesuai</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_NST_Pricing_Admin_Fee</name>
        <label>Set NST Pricing Admin Fee</label>
        <locationX>182</locationX>
        <locationY>971</locationY>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Admin_Fee.Application__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Application__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Admin_Fee.Loan_Information__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Opportunity__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Admin_Fee.Survey__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Admin_Fee.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Admin Fee</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Admin_Fee.Real__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Admin_Fee__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Admin_Fee.Standard__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Admin_Fee.admin_fee__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Admin_Fee.Exposure__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_CAA.Exp_Pricing__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_AdminFeeKenaNSTPricing</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Admin_Fee_to_NST_Pricing</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_NST_Pricing_Admin_Fee_Max_NTF</name>
        <label>Set NST Pricing Admin Fee Max NTF</label>
        <locationX>226</locationX>
        <locationY>6143</locationY>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Admin_Fee.Application__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Application__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Admin_Fee.Loan_Information__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Opportunity__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Admin_Fee.Survey__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Admin_Fee.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Admin Fee</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Admin_Fee.Real__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Admin_Fee__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Admin_Fee.Standard__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Admin_Fee_Max_NTF.admin_fee__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Admin_Fee.Exposure__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_CAA.Exp_Pricing__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_AdminFeeKenaNSTPricing</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Admin_Fee_to_NST_Pricing_Max_NTF</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_NST_Pricing_Effective_Rate</name>
        <label>Set NST Pricing Effective Rate</label>
        <locationX>182</locationX>
        <locationY>2387</locationY>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Effective_Rate.Application__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Application__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Effective_Rate.Loan_Information__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Opportunity__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Effective_Rate.Survey__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Effective_Rate.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Effective Rate</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Effective_Rate.Real__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Effective_Rate__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Effective_Rate.Standard__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>func_POTEffectiveRate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Effective_Rate.Exposure__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_CAA.Exp_Pricing__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_EffectiveRateKenaNSTPricing</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Effective_Rate_to_NST_Pricing</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_NST_Pricing_Provision_Fee</name>
        <label>Set NST Pricing Provision Fee</label>
        <locationX>182</locationX>
        <locationY>1679</locationY>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Provision_Fee.Application__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Application__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Provision_Fee.Loan_Information__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Opportunity__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Provision_Fee.Survey__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Provision_Fee.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Provision Fee</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Provision_Fee.Real__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Provision_Fee__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Provision_Fee.Standard__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>func_POTProvisionFee</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Provision_Fee.Exposure__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_CAA.Exp_Pricing__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_ProvisionFeeKenaNSTPricing</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Provision_Fee_to_NST_Pricing</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_NST_Pricing_Provision_Fee_Max_Tenor</name>
        <label>Set NST Pricing Provision Fee Max Tenor</label>
        <locationX>226</locationX>
        <locationY>5627</locationY>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Provision_Fee.Application__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Application__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Provision_Fee.Loan_Information__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Opportunity__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Provision_Fee.Survey__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Provision_Fee.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Provision Fee</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Provision_Fee.Real__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Provision_Fee__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Provision_Fee.Standard__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>func_ProvisionFeeStd</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Provision_Fee.Exposure__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_CAA.Exp_Pricing__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_ProvisionFeeKenaNSTPricing</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Provision_Fee_to_NST_Pricing_Max_Tenor</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_NST_Pricing_Tenor</name>
        <label>Set NST Pricing Tenor</label>
        <locationX>182</locationX>
        <locationY>4619</locationY>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Tenor.Application__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Loan_Info.Application__r.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Tenor.Loan_Information__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Loan_Info.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Tenor.Survey__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Tenor.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Tenor</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Tenor.Real__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Loan_Info.Tenor__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Tenor.Standard__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Max_Tenor.tenor__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Tenor.Exposure__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_CAA.Exp_Pricing__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_TenorKenaNSTPricing</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Tenor_to_NST_Pricing</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_NST_Pricing_Tenor_Effective_Rate</name>
        <label>Set NST Pricing Tenor Effective Rate</label>
        <locationX>226</locationX>
        <locationY>5111</locationY>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Effective_Rate.Application__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Application__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Effective_Rate.Loan_Information__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Opportunity__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Effective_Rate.Survey__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Effective_Rate.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Effective Rate</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Effective_Rate.Real__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Effective_Rate__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Effective_Rate.Standard__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>func_EffRateStd</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Effective_Rate.Exposure__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_CAA.Exp_Pricing__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_EffectiveRateKenaNSTPricing</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Tenor_Effective_Rate_to_NST_Pricing</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Tenor</name>
        <label>Set Tenor</label>
        <locationX>578</locationX>
        <locationY>3911</locationY>
        <assignmentItems>
            <assignToReference>var_effratestd</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Is_Tenor_Sesuai.rate__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_Flag_NST_Pricing_Tenor</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Check_Flag_NST_Pricing_Tenor</name>
        <label>Check Flag NST Pricing Tenor</label>
        <locationX>578</locationX>
        <locationY>4019</locationY>
        <defaultConnector>
            <targetReference>Loop_Is_Tenor_Sesuai</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Sesuai</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Loop_Is_Tenor_Sesuai.max_tenure__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_Calculator.tenor__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Not</targetReference>
            </connector>
            <label>Sesuai</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_NST_Pricing_Admin_Fee</name>
        <label>Check NST Pricing Admin Fee</label>
        <locationX>534</locationX>
        <locationY>971</locationY>
        <defaultConnector>
            <targetReference>Remove_Admin_Fee_from_NST_Pricing</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Empty</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_NST_Pricing_Admin_Fee</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Provision_Fee</targetReference>
            </connector>
            <label>Empty</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_NST_Pricing_Effective_Rate</name>
        <label>Check NST Pricing Effective Rate</label>
        <locationX>534</locationX>
        <locationY>2387</locationY>
        <defaultConnector>
            <targetReference>Remove_Effective_Rate_from_NST_Pricing</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Copy_2_of_Copy_2_of_Empty</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_NST_Pricing_Effective_Rate</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_LTV</targetReference>
            </connector>
            <label>Empty</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_NST_Pricing_Provision_Fee</name>
        <label>Check NST Pricing Provision Fee</label>
        <locationX>534</locationX>
        <locationY>1679</locationY>
        <defaultConnector>
            <targetReference>Remove_Provision_Fee_from_NST_Pricing</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Copy_2_of_Empty</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_NST_Pricing_Provision_Fee</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Effective_Rate</targetReference>
            </connector>
            <label>Empty</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_NST_Pricing_Tenor</name>
        <label>Check NST Pricing Tenor</label>
        <locationX>534</locationX>
        <locationY>4619</locationY>
        <defaultConnector>
            <targetReference>Remove_Tenor_from_NST_Pricing</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Empty_Tenor</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_NST_Pricing_Tenor</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Is_Effective_Rate_Tenoe_lower_than_default</targetReference>
            </connector>
            <label>Empty Tenor</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_NST_Risk_LTV</name>
        <label>Check NST Risk LTV</label>
        <locationX>666</locationX>
        <locationY>3095</locationY>
        <defaultConnector>
            <targetReference>Remove_LTV_from_NST_Pricing</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Empty_LTV</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_NST_Risk_LTV</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Tenor_Max</targetReference>
            </connector>
            <label>Empty LTV</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Admin_Fee_lower_than_default</name>
        <label>Is Admin Fee lower than default</label>
        <locationX>358</locationX>
        <locationY>863</locationY>
        <defaultConnector>
            <targetReference>Check_NST_Pricing_Admin_Fee</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Admin_Fee_Kena_NST_Pricing</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Admin_Fee__c</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>Get_Admin_Fee.admin_fee__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_NST_Pricing_Admin_Fee</targetReference>
            </connector>
            <label>Admin Fee Kena NST Pricing</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Admin_Fee_NTF_lower_than_default</name>
        <label>Is Admin Fee NTF lower than default</label>
        <locationX>358</locationX>
        <locationY>6035</locationY>
        <defaultConnector>
            <targetReference>Update_Application_Set_NST_Category</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Admin_Fee_Kena_NST_Pricing_NTF</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Admin_Fee.admin_fee__c</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Admin_Fee__c</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>Get_Admin_Fee_Max_NTF.admin_fee__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_NST_Pricing_Admin_Fee_Max_NTF</targetReference>
            </connector>
            <label>Admin Fee Kena NST Pricing NTF</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Effective_Rate_lower_than_default</name>
        <label>Is Effective Rate lower than default</label>
        <locationX>358</locationX>
        <locationY>2279</locationY>
        <defaultConnector>
            <targetReference>Check_NST_Pricing_Effective_Rate</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Effective_Rate_kena_NST_Pricing</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Effective_Rate__c</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>func_POTEffectiveRate</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_NST_Pricing_Effective_Rate</targetReference>
            </connector>
            <label>Effective Rate kena NST Pricing</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Effective_Rate_Tenoe_lower_than_default</name>
        <label>Is Effective Rate Tenor lower than default</label>
        <locationX>358</locationX>
        <locationY>5003</locationY>
        <defaultConnector>
            <targetReference>Get_Provision_Fee_Max_Tenor</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Effective_Rate_kena_NST_Tenor</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Effective_Rate__c</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>func_EffRateStd</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Effective_Rate.rate__c</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_NST_Pricing_Tenor_Effective_Rate</targetReference>
            </connector>
            <label>Effective Rate kena NST Tenor</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Flag_NST_Pricing_Tenor</name>
        <label>Is Flag NST Pricing Tenor</label>
        <locationX>358</locationX>
        <locationY>4511</locationY>
        <defaultConnector>
            <targetReference>Check_NST_Pricing_Tenor</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Delete NST Pricing Tenor</defaultConnectorLabel>
        <rules>
            <name>Add_NST_Pricing_Tenor</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Calculator.tenor__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>Get_Max_Tenor.tenor__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_NST_Pricing_Tenor</targetReference>
            </connector>
            <label>Add NST Pricing Tenor</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_LTV_more_than_default</name>
        <label>Is LTV more than default</label>
        <locationX>358</locationX>
        <locationY>2987</locationY>
        <defaultConnector>
            <targetReference>Check_NST_Risk_LTV</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>More_Less_Than_0_5</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>func_HasilLTV</leftValueReference>
                <operator>LessThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>0.05</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>func_HasilLTV</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>NST_Maximum_LTV_Allowed_5</targetReference>
            </connector>
            <label>More Less Than 0.5</label>
        </rules>
        <rules>
            <name>More_Than_0_5</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>func_HasilLTV</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.05</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>NST_Maximum_LTV_Allowed_GT_5</targetReference>
            </connector>
            <label>More Than 0.5</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Provision_Fee_lower_than_default</name>
        <label>Is Provision Fee lower than default</label>
        <locationX>358</locationX>
        <locationY>1571</locationY>
        <defaultConnector>
            <targetReference>Check_NST_Pricing_Provision_Fee</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Provision_Fee_kena_NST_Pricing</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Provision_Fee__c</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>func_POTProvisionFee</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_NST_Pricing_Provision_Fee</targetReference>
            </connector>
            <label>Provision Fee kena NST Pricing</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Provision_Fee_Tenor_lower_than_default</name>
        <label>Is Provision Fee Tenor lower than default</label>
        <locationX>358</locationX>
        <locationY>5519</locationY>
        <defaultConnector>
            <targetReference>Get_Admin_Fee_Max_NTF</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Provision_Kena_NST_Pricing</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Provision_Fee.rate__c</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Provision_Fee__c</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>func_ProvisionFeeStd</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_NST_Pricing_Provision_Fee_Max_Tenor</targetReference>
            </connector>
            <label>Provision Kena NST Pricing</label>
        </rules>
    </decisions>
    <description>Enhance Admin dan Provisi melebihi standart</description>
    <environments>Default</environments>
    <formulas>
        <name>func_CustomerType</name>
        <dataType>String</dataType>
        <expression>IF(TEXT({!$Record.Opportunity__r.Customer__c}) == &quot;New&quot;, &quot;N&quot;, &quot;R&quot;)</expression>
    </formulas>
    <formulas>
        <name>func_EffRateStd</name>
        <dataType>Number</dataType>
        <expression>IF(ISBLANK({!var_effstdsesuai}), {!var_effratestd}, {!var_effstdsesuai})* 100</expression>
        <scale>5</scale>
    </formulas>
    <formulas>
        <name>func_HasilLTV</name>
        <dataType>Number</dataType>
        <expression>{!Get_Calculator.ltv_ratio__c} - IF(ISBLANK({!Get_LTV.LTV__c}), 0.00, {!Get_LTV.LTV__c})</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>func_ltvreal</name>
        <dataType>Number</dataType>
        <expression>{!Get_Calculator.ltv_ratio__c} * 100</expression>
        <scale>5</scale>
    </formulas>
    <formulas>
        <name>func_LTVstd</name>
        <dataType>Number</dataType>
        <expression>{!Get_LTV.LTV__c} * 100</expression>
        <scale>5</scale>
    </formulas>
    <formulas>
        <name>func_NSTCategory</name>
        <dataType>String</dataType>
        <expression>IF({!var_AdminFeeKenaNSTPricing} == TRUE, &quot;Admin Fee&quot;, &quot;&quot;) &amp; 
IF({!var_AdminFeeKenaNSTPricing} == TRUE &amp;&amp; {!var_ProvisionFeeKenaNSTPricing} == TRUE, &quot;, &quot;, &quot;&quot;) &amp; 
IF({!var_ProvisionFeeKenaNSTPricing} == TRUE, &quot;Provision Fee&quot;, &quot;&quot;) &amp; 
IF(({!var_AdminFeeKenaNSTPricing} == TRUE || {!var_ProvisionFeeKenaNSTPricing} == TRUE) &amp;&amp; {!var_EffectiveRateKenaNSTPricing} == TRUE, &quot;, &quot;, &quot;&quot;) &amp; 
IF({!var_EffectiveRateKenaNSTPricing} == TRUE, &quot;Effective Rate&quot;, &quot;&quot;)</expression>
    </formulas>
    <formulas>
        <name>func_POTEffectiveRate</name>
        <dataType>Number</dataType>
        <expression>{!Get_Effective_Rate.rate__c}*100</expression>
        <scale>5</scale>
    </formulas>
    <formulas>
        <name>func_POTProvisionFee</name>
        <dataType>Number</dataType>
        <expression>{!Get_Provision_Fee.rate__c}*100</expression>
        <scale>5</scale>
    </formulas>
    <formulas>
        <name>func_ProvisionFeeStd</name>
        <dataType>Number</dataType>
        <expression>{!Get_Provision_Fee_Max_Tenor.rate__c}*100</expression>
        <scale>5</scale>
    </formulas>
    <interviewLabel>[Tgr] OnChange Survey Set NST Pricing {!$Flow.CurrentDateTime}</interviewLabel>
    <label>[Tgr] OnChange Survey Set NST Pricing</label>
    <loops>
        <name>Loop_Is_Tenor_Sesuai</name>
        <label>Loop Is Tenor Sesuai</label>
        <locationX>358</locationX>
        <locationY>3803</locationY>
        <collectionReference>Get_Tenor</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Set_Tenor</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Get_Max_Tenor</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Add_Admin_Fee_to_NST_Pricing</name>
        <label>Add Admin Fee to NST Pricing</label>
        <locationX>182</locationX>
        <locationY>1079</locationY>
        <connector>
            <targetReference>Get_Provision_Fee</targetReference>
        </connector>
        <doesUpsert>true</doesUpsert>
        <inputReference>Get_NST_Pricing_Admin_Fee</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Add_Admin_Fee_to_NST_Pricing_Max_NTF</name>
        <label>Add Admin Fee to NST Pricing Max NTF</label>
        <locationX>226</locationX>
        <locationY>6251</locationY>
        <connector>
            <targetReference>Update_Application_Set_NST_Category</targetReference>
        </connector>
        <doesUpsert>true</doesUpsert>
        <inputReference>Get_NST_Pricing_Admin_Fee</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Add_Effective_Rate_to_NST_Pricing</name>
        <label>Add Effective Rate to NST Pricing</label>
        <locationX>182</locationX>
        <locationY>2495</locationY>
        <connector>
            <targetReference>Get_LTV</targetReference>
        </connector>
        <doesUpsert>true</doesUpsert>
        <inputReference>Get_NST_Pricing_Effective_Rate</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Add_Provision_Fee_to_NST_Pricing</name>
        <label>Add Provision Fee to NST Pricing</label>
        <locationX>182</locationX>
        <locationY>1787</locationY>
        <connector>
            <targetReference>Get_Effective_Rate</targetReference>
        </connector>
        <doesUpsert>true</doesUpsert>
        <inputReference>Get_NST_Pricing_Provision_Fee</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Add_Provision_Fee_to_NST_Pricing_Max_Tenor</name>
        <label>Add Provision Fee to NST Pricing Max Tenor</label>
        <locationX>226</locationX>
        <locationY>5735</locationY>
        <connector>
            <targetReference>Get_Admin_Fee_Max_NTF</targetReference>
        </connector>
        <doesUpsert>true</doesUpsert>
        <inputReference>Get_NST_Pricing_Provision_Fee</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Add_Tenor_Effective_Rate_to_NST_Pricing</name>
        <label>Add Tenor Effective Rate to NST Pricing</label>
        <locationX>226</locationX>
        <locationY>5219</locationY>
        <connector>
            <targetReference>Get_Provision_Fee_Max_Tenor</targetReference>
        </connector>
        <doesUpsert>true</doesUpsert>
        <inputReference>Get_NST_Pricing_Effective_Rate</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Add_Tenor_to_NST_Pricing</name>
        <label>Add Tenor to NST Pricing</label>
        <locationX>182</locationX>
        <locationY>4727</locationY>
        <connector>
            <targetReference>Is_Effective_Rate_Tenoe_lower_than_default</targetReference>
        </connector>
        <doesUpsert>true</doesUpsert>
        <inputReference>Get_NST_Pricing_Tenor</inputReference>
    </recordCreates>
    <recordDeletes>
        <name>Remove_Admin_Fee_from_NST_Pricing</name>
        <label>Remove Admin Fee from NST Pricing</label>
        <locationX>622</locationX>
        <locationY>1079</locationY>
        <connector>
            <targetReference>Get_Provision_Fee</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Admin Fee</stringValue>
            </value>
        </filters>
        <filters>
            <field>Survey__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <object>NST_Pricing__c</object>
    </recordDeletes>
    <recordDeletes>
        <name>Remove_Effective_Rate_from_NST_Pricing</name>
        <label>Remove Effective Rate from NST Pricing</label>
        <locationX>622</locationX>
        <locationY>2495</locationY>
        <connector>
            <targetReference>Get_LTV</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Effective Rate</stringValue>
            </value>
        </filters>
        <filters>
            <field>Survey__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <object>NST_Pricing__c</object>
    </recordDeletes>
    <recordDeletes>
        <name>Remove_LTV_from_NST_Pricing</name>
        <label>Remove LTV from NST Pricing</label>
        <locationX>754</locationX>
        <locationY>3203</locationY>
        <connector>
            <targetReference>Get_Tenor_Max</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_NST_Risk_LTV.Id</elementReference>
            </value>
        </filters>
        <object>NST_Opty__c</object>
    </recordDeletes>
    <recordDeletes>
        <name>Remove_Provision_Fee_from_NST_Pricing</name>
        <label>Remove Provision Fee from NST Pricing</label>
        <locationX>622</locationX>
        <locationY>1787</locationY>
        <connector>
            <targetReference>Get_Effective_Rate</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Provision Fee</stringValue>
            </value>
        </filters>
        <filters>
            <field>Survey__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <object>NST_Pricing__c</object>
    </recordDeletes>
    <recordDeletes>
        <name>Remove_Tenor_from_NST_Pricing</name>
        <label>Remove Tenor from NST Pricing</label>
        <locationX>622</locationX>
        <locationY>4727</locationY>
        <connector>
            <targetReference>Is_Effective_Rate_Tenoe_lower_than_default</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Tenor</stringValue>
            </value>
        </filters>
        <filters>
            <field>Survey__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <object>NST_Pricing__c</object>
    </recordDeletes>
    <recordLookups>
        <name>Get_Admin_Fee</name>
        <label>Get Admin Fee</label>
        <locationX>358</locationX>
        <locationY>647</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_NST_Pricing_Admin_Fee</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>product_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>3</stringValue>
            </value>
        </filters>
        <filters>
            <field>ntf_max__c</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.Opportunity__r.NTF_Pengajuan__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>ntf_min__c</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.Opportunity__r.NTF_Pengajuan__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>customer_type__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>func_CustomerType</elementReference>
            </value>
        </filters>
        <filters>
            <field>package_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Product_Offering__r.text_package_id__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Master_Admin_Fee__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Admin_Fee_Max_NTF</name>
        <label>Get Admin Fee Max NTF</label>
        <locationX>358</locationX>
        <locationY>5927</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Is_Admin_Fee_NTF_lower_than_default</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>product_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>3</stringValue>
            </value>
        </filters>
        <filters>
            <field>customer_type__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>func_CustomerType</elementReference>
            </value>
        </filters>
        <filters>
            <field>package_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Product_Offering__r.text_package_id__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Master_Admin_Fee__c</object>
        <sortField>ntf_max__c</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_CAA</name>
        <label>Get CAA</label>
        <locationX>358</locationX>
        <locationY>323</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Loan_Info</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Cabang__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Application__r.BranchId_formula__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Exp_Pricing__c</field>
            <operator>NotEqualTo</operator>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>CAA__c</object>
        <sortField>Exp_Pricing__c</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Calculator</name>
        <label>Get Calculator</label>
        <locationX>358</locationX>
        <locationY>539</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Admin_Fee</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>related_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Loan_Info.Application__r.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>API_Loan_Calculator_Non_KPR__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Effective_Rate</name>
        <label>Get Effective Rate</label>
        <locationX>358</locationX>
        <locationY>2063</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_NST_Pricing_Effective_Rate</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>product_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>3</stringValue>
            </value>
        </filters>
        <filters>
            <field>package_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Product_Offering__r.text_package_id__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>ntf_max__c</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.Opportunity__r.NTF_Pengajuan__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>ntf_min__c</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.Opportunity__r.NTF_Pengajuan__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>max_tenure__c</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Tenor__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>min_tenure__c</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Tenor__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Master_Package_Rate__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Loan_Info</name>
        <label>Get Loan Info</label>
        <locationX>358</locationX>
        <locationY>431</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Calculator</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Opportunity</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_LTV</name>
        <label>Get LTV</label>
        <locationX>358</locationX>
        <locationY>2771</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_NST_Risk_LTV</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>product_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>3</stringValue>
            </value>
        </filters>
        <filters>
            <field>package_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Product_Offering__r.text_package_id__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Owner_Asset__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Calculator.owner_asset__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Master_Package_LTV__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Max_Tenor</name>
        <label>Get Max Tenor</label>
        <locationX>358</locationX>
        <locationY>4403</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Is_Flag_NST_Pricing_Tenor</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>product_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>3</stringValue>
            </value>
        </filters>
        <filters>
            <field>package_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Product_Offering__r.text_package_id__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Master_Package_Tenor__c</object>
        <sortField>tenor__c</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_NST_Pricing_Admin_Fee</name>
        <label>Get NST Pricing Admin Fee</label>
        <locationX>358</locationX>
        <locationY>755</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Is_Admin_Fee_lower_than_default</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Survey__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Admin Fee</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>NST_Pricing__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_NST_Pricing_Effective_Rate</name>
        <label>Get NST Pricing Effective Rate</label>
        <locationX>358</locationX>
        <locationY>2171</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Is_Effective_Rate_lower_than_default</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Survey__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Effective Rate</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>NST_Pricing__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_NST_Pricing_Provision_Fee</name>
        <label>Get NST Pricing Provision Fee</label>
        <locationX>358</locationX>
        <locationY>1463</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Is_Provision_Fee_lower_than_default</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Survey__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Provision Fee</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>NST_Pricing__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_NST_Pricing_Tenor</name>
        <label>Get NST Pricing Tenor</label>
        <locationX>358</locationX>
        <locationY>3695</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_Is_Tenor_Sesuai</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Survey__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Tenor</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>NST_Pricing__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_NST_Risk_LTV</name>
        <label>Get NST Risk LTV</label>
        <locationX>358</locationX>
        <locationY>2879</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Is_LTV_more_than_default</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Application__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Application__r.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Name</field>
            <operator>Contains</operator>
            <value>
                <stringValue>LTV</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>NST_Opty__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Provision_Fee</name>
        <label>Get Provision Fee</label>
        <locationX>358</locationX>
        <locationY>1355</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_NST_Pricing_Provision_Fee</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>product_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>3</stringValue>
            </value>
        </filters>
        <filters>
            <field>package_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Product_Offering__r.text_package_id__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>tenor_max__c</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Tenor__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>tenor_min__c</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Tenor__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Master_Provision_Fee__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Provision_Fee_Max_Tenor</name>
        <label>Get Provision Fee Max Tenor</label>
        <locationX>358</locationX>
        <locationY>5411</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Is_Provision_Fee_Tenor_lower_than_default</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>product_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>3</stringValue>
            </value>
        </filters>
        <filters>
            <field>package_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Product_Offering__r.text_package_id__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Master_Provision_Fee__c</object>
        <sortField>tenor_max__c</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Tenor</name>
        <label>Get Tenor</label>
        <locationX>358</locationX>
        <locationY>3587</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_NST_Pricing_Tenor</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>product_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>3</stringValue>
            </value>
        </filters>
        <filters>
            <field>package_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Product_Offering__r.text_package_id__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>ntf_max__c</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>Get_Tenor_Max.ntf_max__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>ntf_min__c</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>Get_Tenor_Max.ntf_max__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Master_Package_Rate__c</object>
        <sortField>max_tenure__c</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Tenor_Max</name>
        <label>Get Tenor Max</label>
        <locationX>358</locationX>
        <locationY>3479</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Tenor</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>product_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>3</stringValue>
            </value>
        </filters>
        <filters>
            <field>package_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Opportunity__r.Product_Offering__r.text_package_id__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Master_Package_Rate__c</object>
        <sortField>ntf_max__c</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_Application_Set_NST_Category</name>
        <label>Update Application Set NST Category</label>
        <locationX>358</locationX>
        <locationY>6443</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Survey__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>NST_Category__c</field>
            <value>
                <elementReference>func_NSTCategory</elementReference>
            </value>
        </inputAssignments>
        <object>Application__c</object>
    </recordUpdates>
    <start>
        <locationX>232</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Get_CAA</targetReference>
        </connector>
        <filterLogic>or</filterLogic>
        <filters>
            <field>Effective_Rate__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Provision_Fee__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Admin_Fee__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>NTF_Pengajuan__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Product_Offering__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Customer_Type__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Calc_Tenor__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>LTV_of_asset_market_price__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Calc_Owner_Asset__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Alamat_Seller__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>Survey__c</object>
        <recordTriggerType>Update</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Draft</status>
    <subflows>
        <name>NST_Maximum_LTV_Allowed_5</name>
        <label>[NST] Maximum LTV Allowed +5%</label>
        <locationX>50</locationX>
        <locationY>3095</locationY>
        <connector>
            <targetReference>Get_Tenor_Max</targetReference>
        </connector>
        <flowName>Gen_Add_NST_Item</flowName>
        <inputAssignments>
            <name>recordId_Application</name>
            <value>
                <elementReference>$Record.Opportunity__r.Application__r.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varS_NST_Name</name>
            <value>
                <stringValue>Maximum LTV Allowed +5%</stringValue>
            </value>
        </inputAssignments>
        <outputAssignments>
            <assignToReference>Error</assignToReference>
            <name>Error</name>
        </outputAssignments>
    </subflows>
    <subflows>
        <name>NST_Maximum_LTV_Allowed_GT_5</name>
        <label>[NST] Maximum LTV Allowed &gt;5%</label>
        <locationX>314</locationX>
        <locationY>3095</locationY>
        <connector>
            <targetReference>Get_Tenor_Max</targetReference>
        </connector>
        <flowName>Gen_Add_NST_Item</flowName>
        <inputAssignments>
            <name>recordId_Application</name>
            <value>
                <elementReference>$Record.Opportunity__r.Application__r.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varS_NST_Name</name>
            <value>
                <stringValue>Maximum LTV Allowed &gt;5%</stringValue>
            </value>
        </inputAssignments>
        <outputAssignments>
            <assignToReference>Error</assignToReference>
            <name>Error</name>
        </outputAssignments>
    </subflows>
    <variables>
        <name>Error</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>flag_tenor</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>var_AdminFeeKenaNSTPricing</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_EffectiveRateKenaNSTPricing</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_effratestd</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>var_effstdsesuai</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>5</scale>
    </variables>
    <variables>
        <name>var_LTVKenaNSTPricing</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_ProvisionFeeKenaNSTPricing</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_TenorKenaNSTPricing</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_tenorstd</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
</Flow>
