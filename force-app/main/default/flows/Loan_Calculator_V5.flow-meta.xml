<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Calculator_V5</name>
        <label>Calculator V5</label>
        <locationX>974</locationX>
        <locationY>134</locationY>
        <actionName>CalculatorV5.Calculator V5</actionName>
        <actionType>externalService</actionType>
        <connector>
            <targetReference>Assign_HTTP_Code</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Debug_Unknown_API_Call_Error</targetReference>
        </faultConnector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>body</name>
            <value>
                <elementReference>NewReq</elementReference>
            </value>
        </inputParameters>
        <nameSegment>CalculatorV5.Calculator V5</nameSegment>
        <offset>0</offset>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <apiVersion>62.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Assign_All_Inputs_to_Result</name>
        <label>Assign All Inputs to Result</label>
        <locationX>754</locationX>
        <locationY>1106</locationY>
        <assignmentItems>
            <assignToReference>CalculationResult.asset_code__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>NewReq.collateral.assetx5fcode</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CalculationResult.asset_type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>NewReq.collateral.assetx5ftypex5fid</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CalculationResult.building_value__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>NewReq.collateral.buildingx5fvalue</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CalculationResult.category_id__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>NewReq.collateral.categoryx5fid</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CalculationResult.construction_class_code__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>NewReq.collateral.constructionx5fclassx5fcode</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CalculationResult.owner_asset__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>NewReq.collateral.ownerx5fasset</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CalculationResult.package_id__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>NewReq.calculation.packagex5fid</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CalculationResult.product_id__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>NewReq.calculation.productx5fid</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CalculationResult.risk_occupation_code__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>NewReq.collateral.riskx5foccupationx5fcode</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CalculationResult.used_new__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>NewReq.collateral.isx5fnew</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CalculationResult.owner_asset__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>NewReq.collateral.ownerx5fasset</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_Calculation_List</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Amortization</name>
        <label>Assign Amortization</label>
        <locationX>930</locationX>
        <locationY>1730</locationY>
        <assignmentItems>
            <assignToReference>Amortization</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Transform_Amortization</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Amortization.loan_calculation_id__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LoanCalculationID</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Amortization.related_id__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>RelatedObjectID</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>AmortizationList</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Amortization</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Amortization</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Amortization_Count</name>
        <label>Assign Amortization Count</label>
        <locationX>314</locationX>
        <locationY>2438</locationY>
        <assignmentItems>
            <assignToReference>AmortizationCount</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <connector>
            <targetReference>Check_Amortization_Existence</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Calculation_ID</name>
        <label>Assign Loan Calculation ID</label>
        <locationX>666</locationX>
        <locationY>566</locationY>
        <assignmentItems>
            <assignToReference>LoanCalculationID</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Transform_Calculation_ID</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Calculation_Result</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Calculation_List</name>
        <label>Assign Calculation List</label>
        <locationX>754</locationX>
        <locationY>1214</locationY>
        <assignmentItems>
            <assignToReference>CalculationResultList</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>CalculationResult</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Calculation_Result</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Calculation_Result</name>
        <label>Assign Calculation Result</label>
        <locationX>754</locationX>
        <locationY>890</locationY>
        <assignmentItems>
            <assignToReference>CalculationResult</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Transform_Calculation_Result</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_Related_Object_and_Loan_Calculation_ID</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Error_Due_to_Non_200_Response</name>
        <label>Assign Error Due to Non 200 Response</label>
        <locationX>1282</locationX>
        <locationY>566</locationY>
        <assignmentItems>
            <assignToReference>IsError</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Error</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Transform_Error</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Assign_HTTP_Code</name>
        <label>Assign HTTP Code</label>
        <locationX>974</locationX>
        <locationY>242</locationY>
        <assignmentItems>
            <assignToReference>HttpCode</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Calculator_V5.responseCode</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_HTTP_Code</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Related_Object_and_Loan_Calculation_ID</name>
        <label>Assign Related Object and Loan Calculation ID</label>
        <locationX>754</locationX>
        <locationY>998</locationY>
        <assignmentItems>
            <assignToReference>CalculationResult.related_id__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>RelatedObjectID</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CalculationResult.loan_calculation_id__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LoanCalculationID</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_All_Inputs_to_Result</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Debug_Deletion</name>
        <label>Debug Deletion</label>
        <locationX>314</locationX>
        <locationY>2762</locationY>
        <assignmentItems>
            <assignToReference>Error</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>IsError</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Debug_Save_Calculation</name>
        <label>Debug Save Calculation</label>
        <locationX>754</locationX>
        <locationY>2222</locationY>
        <assignmentItems>
            <assignToReference>Error</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>IsError</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Debug_Unknown_API_Call_Error</name>
        <label>Debug Unknown API Call Error</label>
        <locationX>1546</locationX>
        <locationY>242</locationY>
        <assignmentItems>
            <assignToReference>Error</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>IsError</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Transform_Error</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Calculation_Status</name>
        <label>Set Calculation Status</label>
        <locationX>314</locationX>
        <locationY>3194</locationY>
        <assignmentItems>
            <assignToReference>IsError</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
    </assignments>
    <decisions>
        <name>Check_Amortization_Existence</name>
        <label>Check Amortization Existence</label>
        <locationX>314</locationX>
        <locationY>2546</locationY>
        <defaultConnector>
            <targetReference>Save_Amortization</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NOT EXIST</defaultConnectorLabel>
        <rules>
            <name>EXIST</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>ExistingAmortizationList</leftValueReference>
                <operator>IsEmpty</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Delete_Existing_Amortization</targetReference>
            </connector>
            <label>EXIST</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_HTTP_Code</name>
        <label>Check HTTP Code</label>
        <locationX>974</locationX>
        <locationY>350</locationY>
        <defaultConnector>
            <targetReference>Transform_Error</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>OTHER</defaultConnectorLabel>
        <rules>
            <name>HTTP_200</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>HttpCode</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>200.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Transform_Calculation_ID</targetReference>
            </connector>
            <label>HTTP 200</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Result_Need_To_Save</name>
        <label>Is Result Need To Save ?</label>
        <locationX>666</locationX>
        <locationY>2006</locationY>
        <defaultConnectorLabel>NO</defaultConnectorLabel>
        <rules>
            <name>YES</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SaveResultToObject</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Save_Calculation_Result</targetReference>
            </connector>
            <label>YES</label>
        </rules>
    </decisions>
    <description>Use External Service V5
Expected the Latest</description>
    <environments>Default</environments>
    <formulas>
        <name>UsedNew</name>
        <dataType>String</dataType>
        <expression>IF(CONTAINS({!Req.collateral.assetx5fcode}, &apos;USED&apos;), &apos;U&apos;, &apos;N&apos;)</expression>
    </formulas>
    <interviewLabel>Loan Calculator V5 {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Loan Calculator V5</label>
    <loops>
        <name>Loop_Amortization</name>
        <label>Loop Amortization</label>
        <locationX>842</locationX>
        <locationY>1514</locationY>
        <collectionReference>Loop_Calculation_Response.amortization</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Transform_Amortization</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Loop_Calculation_Response</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_Calculation_Response</name>
        <label>Loop Calculation Response</label>
        <locationX>666</locationX>
        <locationY>1406</locationY>
        <collectionReference>Calculator_V5.2XX.data.calculation</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Loop_Amortization</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Is_Result_Need_To_Save</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_Calculation_Result</name>
        <label>Loop Calculation Result</label>
        <locationX>666</locationX>
        <locationY>674</locationY>
        <collectionReference>Calculator_V5.2XX.data.calculation</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Transform_Calculation_Result</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Loop_Calculation_Response</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Save_Amortization</name>
        <label>Save Amortization</label>
        <locationX>314</locationX>
        <locationY>3086</locationY>
        <connector>
            <targetReference>Set_Calculation_Status</targetReference>
        </connector>
        <inputReference>AmortizationList</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Save_Calculation_Result</name>
        <label>Save Calculation Result</label>
        <locationX>314</locationX>
        <locationY>2114</locationY>
        <connector>
            <targetReference>Update_For_Input_Parameters</targetReference>
        </connector>
        <doesUpsert>true</doesUpsert>
        <faultConnector>
            <targetReference>Debug_Save_Calculation</targetReference>
        </faultConnector>
        <inputReference>CalculationResultList</inputReference>
        <upsertExternalIdField>related_id__c</upsertExternalIdField>
    </recordCreates>
    <recordDeletes>
        <name>Delete_Existing_Amortization</name>
        <label>Delete Existing Amortization</label>
        <locationX>50</locationX>
        <locationY>2654</locationY>
        <connector>
            <targetReference>Save_Amortization</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Debug_Deletion</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>related_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>RelatedObjectID</elementReference>
            </value>
        </filters>
        <object>API_Loan_Amortization__c</object>
    </recordDeletes>
    <recordLookups>
        <name>Check_Existing_Amortization</name>
        <label>Check Existing Amortization</label>
        <locationX>314</locationX>
        <locationY>2330</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Amortization_Count</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>related_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>RelatedObjectID</elementReference>
            </value>
        </filters>
        <object>API_Loan_Amortization__c</object>
        <outputReference>ExistingAmortizationList</outputReference>
        <queriedFields>Id</queriedFields>
    </recordLookups>
    <recordUpdates>
        <name>Update_For_Input_Parameters</name>
        <label>Update For Input Parameters</label>
        <locationX>314</locationX>
        <locationY>2222</locationY>
        <connector>
            <targetReference>Check_Existing_Amortization</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>related_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>RelatedObjectID</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>asset_code__c</field>
            <value>
                <elementReference>NewReq.collateral.assetx5fcode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>asset_type__c</field>
            <value>
                <elementReference>NewReq.collateral.assetx5ftypex5fid</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>building_value__c</field>
            <value>
                <elementReference>NewReq.collateral.buildingx5fvalue</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>category_id__c</field>
            <value>
                <elementReference>NewReq.collateral.categoryx5fid</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>construction_class_code__c</field>
            <value>
                <elementReference>NewReq.collateral.constructionx5fclassx5fcode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>owner_asset__c</field>
            <value>
                <elementReference>NewReq.collateral.ownerx5fasset</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>package_id__c</field>
            <value>
                <elementReference>NewReq.calculation.packagex5fid</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>product_id__c</field>
            <value>
                <elementReference>NewReq.calculation.productx5fid</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>provision_fee_type__c</field>
            <value>
                <stringValue>PERCENTAGE</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>risk_occupation_code__c</field>
            <value>
                <elementReference>NewReq.collateral.riskx5foccupationx5fcode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>used_new__c</field>
            <value>
                <elementReference>UsedNew</elementReference>
            </value>
        </inputAssignments>
        <object>API_Loan_Calculator_Non_KPR__c</object>
    </recordUpdates>
    <start>
        <locationX>848</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Calculator_V5</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <transforms>
        <name>Transform_Amortization</name>
        <label>Transform Amortization</label>
        <locationX>930</locationX>
        <locationY>1622</locationY>
        <connector>
            <targetReference>Assign_Amortization</targetReference>
        </connector>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <objectType>API_Loan_Amortization__c</objectType>
        <scale>0</scale>
        <storeOutputAutomatically>true</storeOutputAutomatically>
        <transformValues>
            <transformValueActions>
                <outputFieldApiName>admin_fee__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Amortization.adminx5ffee</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>installment__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Amortization.installment</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>interest__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Amortization.interest</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>principal__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Amortization.principal</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>provision_fee__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Amortization.provisionx5ffee</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>sequence__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Amortization.sequence</elementReference>
                </value>
            </transformValueActions>
        </transformValues>
    </transforms>
    <transforms>
        <name>Transform_Calculation_ID</name>
        <label>Transform Calculation ID</label>
        <locationX>666</locationX>
        <locationY>458</locationY>
        <connector>
            <targetReference>Assign_Calculation_ID</targetReference>
        </connector>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <scale>0</scale>
        <storeOutputAutomatically>true</storeOutputAutomatically>
        <transformValues>
            <transformValueActions>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Calculator_V5.2XX.data.loanx5fcalculationx5fid</elementReference>
                </value>
            </transformValueActions>
        </transformValues>
    </transforms>
    <transforms>
        <name>Transform_Calculation_Result</name>
        <label>Transform Calculation Result</label>
        <locationX>754</locationX>
        <locationY>782</locationY>
        <connector>
            <targetReference>Assign_Calculation_Result</targetReference>
        </connector>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <objectType>API_Loan_Calculator_Non_KPR__c</objectType>
        <scale>0</scale>
        <storeOutputAutomatically>true</storeOutputAutomatically>
        <transformValues>
            <transformValueActions>
                <outputFieldApiName>adjusted_effective_rate__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.adjustedx5feffectivex5frate</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>admin_fee__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.adminx5ffee</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>admin_fee_capitalization_type__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.adminx5ffeex5fcapitalizationx5ftype</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>amortization_type__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.amortizationx5ftype</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>area_price_list_id__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.areax5fpricex5flistx5fid</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>asset_insurance_calculation_id__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.assetx5finsurancex5fcalculationx5fid</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>asset_insurance_capitalization_type__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.assetx5finsurancex5fcapitalizationx5ftype</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>asset_insurance_coverage_type__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.assetx5finsurancex5fcoveragex5ftype</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>asset_insurance_premium__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.assetx5finsurancex5fpremium</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>calculation_type__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.calculationx5ftype</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>capitalized_ntf_amount__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.capitalizedx5fntfx5famount</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>credit_insurance_calculation_id__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.creditx5finsurancex5fcalculationx5fid</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>credit_insurance_premium__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.creditx5finsurancex5fpremium</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>down_payment_amount_by_customer__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.downx5fpaymentx5famountx5fbyx5fcustomer</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>effective_rate__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.effectivex5frate</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>fiducia_fee__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.fiduciax5ffee</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>fiducia_fee_capitalization_type__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.fiduciax5ffeex5fcapitalizationx5ftype</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>first_installment_type__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.firstx5finstallmentx5ftype</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>flat_rate__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.flatx5frate</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>flat_rate_monthly__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.flatx5fratex5fmonthly</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>floating_period_review__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.floatingx5fperiodx5freview</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>floating_rate_sequence__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.floatingx5fratex5fsequence</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>floating_reference_rate_code__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.floatingx5freferencex5fratex5fcode</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>floating_spread_rate__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.floatingx5fspreadx5frate</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>funding_ratio__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.fundingx5fratio</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>group_id__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.groupx5fid</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>incentive_amount__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.incentivex5famount</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>initial_down_payment_amount__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.initialx5fdownx5fpaymentx5famount</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>installment__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.installment</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>installment_scheme__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.installmentx5fscheme</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>interest_type__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.interestx5ftype</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>is_custom_pricing__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.isx5fcustomx5fpricing</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>is_potong_funding__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.isx5fpotongx5ffunding</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>life_insurance_calculation_id__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.lifex5finsurancex5fcalculationx5fid</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>life_insurance_capitalization_type__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.lifex5finsurancex5fcapitalizationx5ftype</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>life_insurance_premium__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.lifex5finsurancex5fpremium</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>ltv_ratio__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.ltvx5fratio</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>notary_fee__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.notaryx5ffee</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>notary_fee_capitalization_type__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.notaryx5ffeex5fcapitalizationx5ftype</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>ntf_amount__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.ntfx5famount</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>other_fee__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.otherx5ffee</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>other_fee_capitalization_type__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.otherx5ffeex5fcapitalizationx5ftype</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>package_group_id__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.packagex5fgroupx5fid</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>provision_fee__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.provisionx5ffee</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>provision_fee_capitalization_type__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.provisionx5ffeex5fcapitalizationx5ftype</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>provision_rate__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.provisionx5frate</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>pure_ntf_amount__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.purex5fntfx5famount</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>reverse_dp__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.reversex5fdp</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>reverse_otr__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.reversex5fotr</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>rounded_up_installment__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.roundedx5fupx5finstallment</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>rsa_insurance_calculation_id__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.rsax5finsurancex5fcalculationx5fid</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>rsa_insurance_premium__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.rsax5finsurancex5fpremium</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>santunan_insurance_calculation_id__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.santunanx5finsurancex5fcalculationx5fid</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>santunan_insurance_capitalization_type__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.santunanx5finsurancex5fcapitalizationx5ftype</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>santunan_insurance_premium__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.santunanx5finsurancex5fpremium</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>survey_fee__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.surveyx5ffee</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>survey_fee_capitalization_type__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.surveyx5ffeex5fcapitalizationx5ftype</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>tenor__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.tenor</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>total_admin_fee__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.totalx5fadminx5ffee</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>total_down_payment_amount__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.totalx5fdownx5fpaymentx5famount</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>total_insurance_premium__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.totalx5finsurancex5fpremium</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>total_repayment__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.totalx5frepayment</elementReference>
                </value>
            </transformValueActions>
            <transformValueActions>
                <outputFieldApiName>total_reverse_down_payment__c</outputFieldApiName>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Loop_Calculation_Result.totalx5freversex5fdownx5fpayment</elementReference>
                </value>
            </transformValueActions>
        </transformValues>
    </transforms>
    <transforms>
        <name>Transform_Error</name>
        <label>Transform Error</label>
        <locationX>1282</locationX>
        <locationY>458</locationY>
        <connector>
            <targetReference>Assign_Error_Due_to_Non_200_Response</targetReference>
        </connector>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <scale>0</scale>
        <storeOutputAutomatically>true</storeOutputAutomatically>
        <transformValues>
            <transformValueActions>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Calculator_V5.defaultExc</elementReference>
                </value>
            </transformValueActions>
        </transformValues>
    </transforms>
    <variables>
        <name>Amortization</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>API_Loan_Amortization__c</objectType>
    </variables>
    <variables>
        <name>AmortizationCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>AmortizationList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <objectType>API_Loan_Amortization__c</objectType>
    </variables>
    <variables>
        <name>CalculationResult</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>API_Loan_Calculator_Non_KPR__c</objectType>
    </variables>
    <variables>
        <name>CalculationResultList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <objectType>API_Loan_Calculator_Non_KPR__c</objectType>
    </variables>
    <variables>
        <name>Error</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>ExistingAmortizationList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>API_Loan_Amortization__c</objectType>
    </variables>
    <variables>
        <name>HttpCode</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>9999.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>IsError</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>LoanCalculationID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>NewReq</name>
        <apexClass>ExternalService__CalculatorV5_Calculatorx20V5_IN_body</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>RelatedObjectID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Request Body</description>
        <name>Req</name>
        <apexClass>ExternalService__CalculatorV3_Calculatorx20V3_IN_body</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>SaveResultToObject</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>true</booleanValue>
        </value>
    </variables>
</Flow>
