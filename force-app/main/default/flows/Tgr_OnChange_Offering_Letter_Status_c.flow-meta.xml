<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>62.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Assign_Confins_Customer_ID_From_CIF_Info</name>
        <label>Assign Confins Customer ID From CIF Info</label>
        <locationX>1117</locationX>
        <locationY>2988</locationY>
        <assignmentItems>
            <assignToReference>ConfinsCustomerID</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CIF_Info.ConfinsCustomerID</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Calculation_Result</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_expiredTimeStamp</name>
        <label>Assign expiredTimeStamp</label>
        <locationX>1139</locationX>
        <locationY>3696</locationY>
        <assignmentItems>
            <assignToReference>expiredTimeStamp</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Virtual_Account_Request.expired_date_date</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Data_VA</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_MOU_Number_Status</name>
        <label>Assign MOU Number &amp; Status</label>
        <locationX>1139</locationX>
        <locationY>2280</locationY>
        <assignmentItems>
            <assignToReference>MOUNumber</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>API_Create_MOU_Submission_Call.MouNumber</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>MOUStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>API_Create_MOU_Submission_Call.Status</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_Is_Confins_Customer_ID_Empty</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_1_of_Assign_Guarantor_CIF_ID</name>
        <label>Assign Guarantor CIF ID</label>
        <locationX>842</locationX>
        <locationY>1140</locationY>
        <assignmentItems>
            <assignToReference>GuarantorID</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Guarantor_Call.guarantor_cif_id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Agreement_Call</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Debug_Error</name>
        <label>Debug Error</label>
        <locationX>611</locationX>
        <locationY>384</locationY>
        <assignmentItems>
            <assignToReference>DebugLog</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Call_CIF.Error</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Cek_Error_Customer_CIF</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_AgreementID</name>
        <label>Set AgreementID</label>
        <locationX>1205</locationX>
        <locationY>1848</locationY>
        <assignmentItems>
            <assignToReference>AgreementID</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Agreement_Call.agreement_id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>AgreementNumber</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Agreement_Call.agreement_number</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Is_PRK</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_CIFID</name>
        <label>Set CIFID</label>
        <locationX>908</locationX>
        <locationY>600</locationY>
        <assignmentItems>
            <assignToReference>CIFID</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Call_CIF.customer_cif_id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Survey</targetReference>
        </connector>
    </assignments>
    <customErrors>
        <name>Error_Agreement</name>
        <label>Error Agreement</label>
        <locationX>611</locationX>
        <locationY>1848</locationY>
        <connector>
            <targetReference>Send_Error_Agreement</targetReference>
        </connector>
        <customErrorMessages>
            <errorMessage>Error API Agreement : {!Agreement_Call.Error}</errorMessage>
            <isFieldError>false</isFieldError>
        </customErrorMessages>
    </customErrors>
    <customErrors>
        <name>Error_CIF</name>
        <label>Error CIF</label>
        <locationX>314</locationX>
        <locationY>600</locationY>
        <connector>
            <targetReference>Send_Error_CIF</targetReference>
        </connector>
        <customErrorMessages>
            <errorMessage>Error API CIF : {!Call_CIF.Error}</errorMessage>
            <isFieldError>false</isFieldError>
        </customErrorMessages>
    </customErrors>
    <customErrors>
        <name>Error_Guarantor</name>
        <label>Error Guarantor</label>
        <locationX>578</locationX>
        <locationY>1140</locationY>
        <connector>
            <targetReference>Send_Error_Guarantor</targetReference>
        </connector>
        <customErrorMessages>
            <errorMessage>Error API Guarantor : {!061171ca-ab98-4968-a5e6-e4fad5383a87.Error}</errorMessage>
            <isFieldError>false</isFieldError>
        </customErrorMessages>
    </customErrors>
    <customErrors>
        <name>Error_MOU</name>
        <label>Error MOU</label>
        <locationX>875</locationX>
        <locationY>2280</locationY>
        <connector>
            <targetReference>Send_Error_MOU</targetReference>
        </connector>
        <customErrorMessages>
            <errorMessage>{!API_Create_MOU_Submission_Call.Error}</errorMessage>
            <isFieldError>false</isFieldError>
        </customErrorMessages>
    </customErrors>
    <customErrors>
        <name>Error_VA</name>
        <label>Error VA</label>
        <locationX>875</locationX>
        <locationY>3696</locationY>
        <connector>
            <targetReference>Send_Error_VA</targetReference>
        </connector>
        <customErrorMessages>
            <errorMessage>Error API Virtual Account : {!Virtual_Account_Request.message}</errorMessage>
            <isFieldError>false</isFieldError>
        </customErrorMessages>
    </customErrors>
    <decisions>
        <name>Cek_Error_Agreement</name>
        <label>Cek Error Agreement</label>
        <locationX>908</locationX>
        <locationY>1740</locationY>
        <defaultConnector>
            <targetReference>Set_AgreementID</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Aman</defaultConnectorLabel>
        <rules>
            <name>Ada_Error_Agreement</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Agreement_Call.Error</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Error_Agreement</targetReference>
            </connector>
            <label>Ada Error Agreement</label>
        </rules>
    </decisions>
    <decisions>
        <name>Cek_Error_Customer_CIF</name>
        <label>Cek Error Customer CIF</label>
        <locationX>611</locationX>
        <locationY>492</locationY>
        <defaultConnector>
            <targetReference>Set_CIFID</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Aman</defaultConnectorLabel>
        <rules>
            <name>Ada_Error</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Call_CIF.Error</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Error_CIF</targetReference>
            </connector>
            <label>Ada Error</label>
        </rules>
    </decisions>
    <decisions>
        <name>Cek_Error_VA</name>
        <label>Cek Error VA</label>
        <locationX>1007</locationX>
        <locationY>3588</locationY>
        <defaultConnector>
            <targetReference>Assign_expiredTimeStamp</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Aman</defaultConnectorLabel>
        <rules>
            <name>Ada_Error_VA</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Virtual_Account_Request.message</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Error_VA</targetReference>
            </connector>
            <label>Ada Error VA</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Is_CIF_Info_Error</name>
        <label>Check Is CIF Info Error</label>
        <locationX>1029</locationX>
        <locationY>2880</locationY>
        <defaultConnector>
            <targetReference>Assign_Confins_Customer_ID_From_CIF_Info</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NOT ERROR</defaultConnectorLabel>
        <rules>
            <name>YES_ERROR</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>CIF_Info.error</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Calculation_Result</targetReference>
            </connector>
            <label>YES ERROR</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Is_Confins_Customer_ID_Empty</name>
        <label>Check Is Confins Customer ID Empty</label>
        <locationX>1205</locationX>
        <locationY>2664</locationY>
        <defaultConnector>
            <targetReference>Get_Calculation_Result</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NOT EMPTY</defaultConnectorLabel>
        <rules>
            <name>YES_EMPTY</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Get_Survey.Lead__r.Primary_Contact__r.Confins_Customer_ID__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Survey.Lead__r.Primary_Contact__r.Confins_Customer_ID__c</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>CIF_Info</targetReference>
            </connector>
            <label>YES EMPTY</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_KPR</name>
        <label>Check KPR</label>
        <locationX>1205</locationX>
        <locationY>3372</locationY>
        <defaultConnector>
            <targetReference>Recalculate</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Non KPR</defaultConnectorLabel>
        <rules>
            <name>KPR</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>PackageIDNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>14.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>PackageIDNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>15.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>PackageIDNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>16.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>PackageIDNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>17.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Virtual_Account_Request</targetReference>
            </connector>
            <label>KPR</label>
        </rules>
    </decisions>
    <decisions>
        <name>Copy_1_of_Cek_Error_Guarantor</name>
        <label>Cek Error Guarantor</label>
        <locationX>710</locationX>
        <locationY>1032</locationY>
        <defaultConnector>
            <targetReference>Copy_1_of_Assign_Guarantor_CIF_ID</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Aman</defaultConnectorLabel>
        <rules>
            <name>Copy_1_of_Ada_Error_Guarantor</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Guarantor_Call.Error</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Error_Guarantor</targetReference>
            </connector>
            <label>Ada Error Guarantor</label>
        </rules>
    </decisions>
    <decisions>
        <name>Copy_1_of_Chek_Has_Guarantor</name>
        <label>Chek Has Guarantor</label>
        <locationX>908</locationX>
        <locationY>816</locationY>
        <defaultConnector>
            <targetReference>Agreement_Call</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NO GUARANTOR</defaultConnectorLabel>
        <rules>
            <name>HAS_GUARANTOR</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Survey.Has_Guarantor__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Guarantor_Call</targetReference>
            </connector>
            <label>HAS GUARANTOR</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_MOU_Error</name>
        <label>Is MOU Error</label>
        <locationX>1007</locationX>
        <locationY>2172</locationY>
        <defaultConnector>
            <targetReference>Assign_MOU_Number_Status</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Aman</defaultConnectorLabel>
        <rules>
            <name>YES_MOU_ERROR</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>API_Create_MOU_Submission_Call.Error</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Error_MOU</targetReference>
            </connector>
            <label>Error</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_PRK</name>
        <label>Is PRK</label>
        <locationX>1205</locationX>
        <locationY>1956</locationY>
        <defaultConnector>
            <targetReference>Check_Is_Confins_Customer_ID_Empty</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NO</defaultConnectorLabel>
        <rules>
            <name>YES_PRK</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>PackageIDNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>19.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>PackageIDNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>20.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>PackageIDNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>21.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>PackageIDNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>22.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>PackageIDNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>23.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>PackageIDNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>24.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>API_Create_MOU_Submission_Call</targetReference>
            </connector>
            <label>YES PRK</label>
        </rules>
    </decisions>
    <description>Get Customer Confins ID
Remove Update Guarantor ID Because Guarantor ID Already Set When Created
Expected the latest</description>
    <environments>Default</environments>
    <formulas>
        <name>PackageIDNumber</name>
        <dataType>Number</dataType>
        <expression>IF(
  ISNUMBER({!Get_Survey.Product_Offering__c}),
  VALUE({!Get_Survey.Product_Offering__c}),
  0
)</expression>
        <scale>0</scale>
    </formulas>
    <interviewLabel>[Tgr] OnChange Offering_Letter_Status__c {!$Flow.CurrentDateTime}</interviewLabel>
    <label>[Tgr] OnChange Offering_Letter_Status__c</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Save_Agreement_Process_Fields</name>
        <label>Save Agreement Process Fields</label>
        <locationX>1205</locationX>
        <locationY>4620</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Application__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Application__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>agreement_date__c</field>
            <value>
                <elementReference>Agreement_Call.AgreementDate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>agreement_id__c</field>
            <value>
                <elementReference>Agreement_Call.agreement_id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>agreement_number__c</field>
            <value>
                <elementReference>Agreement_Call.agreement_number</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>beneficiary_bank_account__c</field>
            <value>
                <elementReference>Agreement_Call.BeneficiaryBankAccount</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>beneficiary_bank_account_name__c</field>
            <value>
                <elementReference>Agreement_Call.BeneficiaryBankAccountName</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>beneficiary_bank_code__c</field>
            <value>
                <elementReference>Agreement_Call.BeneficiaryBankCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>beneficiary_bank_id__c</field>
            <value>
                <elementReference>Agreement_Call.BeneficiaryBankID</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>beneficiary_bank_name_display__c</field>
            <value>
                <elementReference>BankNameDisplay</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>effective_date__c</field>
            <value>
                <elementReference>Agreement_Call.EffectiveDate</elementReference>
            </value>
        </inputAssignments>
        <object>agreement_id_creation__c</object>
        <operationMultMatchingRecords>UpdateLatestRecord</operationMultMatchingRecords>
        <operationOneMatchingRecord>UpdateAllRecords</operationOneMatchingRecord>
        <operationZeroMatchingRecords>AddRecord</operationZeroMatchingRecords>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <name>Get_Bank_Name</name>
        <label>Get Bank Name</label>
        <locationX>1205</locationX>
        <locationY>4512</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Save_Agreement_Process_Fields</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>code__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Agreement_Call.BeneficiaryBankCode</elementReference>
            </value>
        </filters>
        <object>Master_Bank__c</object>
        <outputAssignments>
            <assignToReference>BankNameDisplay</assignToReference>
            <field>Name</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Get_Calculation_Result</name>
        <label>Get Calculation Result</label>
        <locationX>1205</locationX>
        <locationY>3264</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_KPR</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>related_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>API_Loan_Calculator_Non_KPR__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Survey</name>
        <label>Get Survey</label>
        <locationX>908</locationX>
        <locationY>708</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Copy_1_of_Chek_Has_Guarantor</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Survey__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Survey__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>CleanUp_ErrorMsg</name>
        <label>CleanUp ErrorMsg</label>
        <locationX>50</locationX>
        <locationY>276</locationY>
        <inputAssignments>
            <field>ErrorMsgVisible__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ErrorMsg__c</field>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Save_CIF_ID</name>
        <label>Save CIF ID</label>
        <locationX>1205</locationX>
        <locationY>4296</locationY>
        <connector>
            <targetReference>Set_Agreement_ID_Number_MOU</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Loan_Information__r.Account.Primary_Contact__c</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Confins_Customer_ID__c</field>
            <value>
                <elementReference>ConfinsCustomerID</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>customer_cif_id__c</field>
            <value>
                <elementReference>CIFID</elementReference>
            </value>
        </inputAssignments>
        <object>Contact</object>
    </recordUpdates>
    <recordUpdates>
        <name>Send_Error_Agreement</name>
        <label>Send Error</label>
        <locationX>611</locationX>
        <locationY>1956</locationY>
        <inputAssignments>
            <field>ErrorMsgVisible__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ErrorMsg__c</field>
            <value>
                <stringValue>Error API Agreement : {!Agreement_Call.Error}</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Offering_Letter_Status__c</field>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Send_Error_CIF</name>
        <label>Send Error</label>
        <locationX>314</locationX>
        <locationY>708</locationY>
        <inputAssignments>
            <field>ErrorMsgVisible__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ErrorMsg__c</field>
            <value>
                <stringValue>Error CIF : {!Call_CIF}</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Offering_Letter_Status__c</field>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Send_Error_Guarantor</name>
        <label>Send Error</label>
        <locationX>578</locationX>
        <locationY>1248</locationY>
        <inputAssignments>
            <field>ErrorMsgVisible__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ErrorMsg__c</field>
            <value>
                <stringValue>Guarantor Error : {!Guarantor_Call.Error}</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Offering_Letter_Status__c</field>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <description>When MOU is error. MOU Error will be displayed but user doesn&apos;t need to re-do the whole process. 
The CIF, Guarantor and Agreement are not required to be re-created.
Instead, user need to re-run the MOU flow independently.</description>
        <name>Send_Error_MOU</name>
        <label>Send Error</label>
        <locationX>875</locationX>
        <locationY>2388</locationY>
        <connector>
            <targetReference>Check_Is_Confins_Customer_ID_Empty</targetReference>
        </connector>
        <inputAssignments>
            <field>ErrorMsgVisible__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ErrorMsg__c</field>
            <value>
                <elementReference>API_Create_MOU_Submission_Call.Error</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Send_Error_VA</name>
        <label>Send Error VA</label>
        <locationX>875</locationX>
        <locationY>3804</locationY>
        <inputAssignments>
            <field>ErrorMsgVisible__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ErrorMsg__c</field>
            <value>
                <stringValue>Error API Virtual Account : {!Virtual_Account_Request.message}</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Offering_Letter_Status__c</field>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Set_Agreement_ID_Number_MOU</name>
        <label>Set Agreement ID, Agreement Number and MOU</label>
        <locationX>1205</locationX>
        <locationY>4404</locationY>
        <connector>
            <targetReference>Get_Bank_Name</targetReference>
        </connector>
        <inputAssignments>
            <field>MOU_Number__c</field>
            <value>
                <elementReference>MOUNumber</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MOU_Status__c</field>
            <value>
                <elementReference>MOUStatus</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>agreement_id__c</field>
            <value>
                <elementReference>AgreementID</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>agreement_number__c</field>
            <value>
                <elementReference>AgreementNumber</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Data_VA</name>
        <label>Update Data VA</label>
        <locationX>1139</locationX>
        <locationY>3804</locationY>
        <connector>
            <targetReference>Recalculate</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>VA_Amount__c</field>
            <value>
                <elementReference>Virtual_Account_Request.amount_output</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>VA_Expiry_Date__c</field>
            <value>
                <elementReference>expiredTimeStamp</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>VA_Number_1__c</field>
            <value>
                <elementReference>Virtual_Account_Request.virtualAccountNumber_1</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>VA_Number_2__c</field>
            <value>
                <elementReference>Virtual_Account_Request.virtualAccountNumber_2</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>VA_Status__c</field>
            <value>
                <elementReference>Virtual_Account_Request.status</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Virtual_Account_Bank_1__c</field>
            <value>
                <elementReference>Virtual_Account_Request.virtualAccountBank_1</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Virtual_Account_Bank_2__c</field>
            <value>
                <elementReference>Virtual_Account_Request.virtualAccountBank_2</elementReference>
            </value>
        </inputAssignments>
        <object>Application__c</object>
    </recordUpdates>
    <start>
        <locationX>204</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>CleanUp_ErrorMsg</targetReference>
        </connector>
        <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Offering_Letter_Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Setuju</stringValue>
            </value>
        </filters>
        <object>Application__c</object>
        <recordTriggerType>Update</recordTriggerType>
        <scheduledPaths>
            <connector>
                <targetReference>Call_CIF</targetReference>
            </connector>
            <pathType>AsyncAfterCommit</pathType>
        </scheduledPaths>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <subflows>
        <name>Agreement_Call</name>
        <label>Agreement Call</label>
        <locationX>908</locationX>
        <locationY>1632</locationY>
        <connector>
            <targetReference>Cek_Error_Agreement</targetReference>
        </connector>
        <flowName>Agreement_ID_V4_Call</flowName>
        <inputAssignments>
            <name>CustomerCIFID</name>
            <value>
                <elementReference>Call_CIF.customer_cif_id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>GuarantorCIF</name>
            <value>
                <elementReference>Guarantor_Call.guarantor_cif_id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>recordId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>API_Create_MOU_Submission_Call</name>
        <label>[API] Create MOU Submission Call</label>
        <locationX>1007</locationX>
        <locationY>2064</locationY>
        <connector>
            <targetReference>Is_MOU_Error</targetReference>
        </connector>
        <flowName>API_Create_MOU_Submission_Call</flowName>
        <inputAssignments>
            <name>CustomerCIF</name>
            <value>
                <elementReference>Call_CIF.customer_cif_id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>recordId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Call_CIF</name>
        <label>Call CIF</label>
        <locationX>611</locationX>
        <locationY>276</locationY>
        <connector>
            <targetReference>Debug_Error</targetReference>
        </connector>
        <flowName>CIF_Call</flowName>
        <inputAssignments>
            <name>recordId_Application</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>CIF_Info</name>
        <label>CIF Info</label>
        <locationX>1029</locationX>
        <locationY>2772</locationY>
        <connector>
            <targetReference>Check_Is_CIF_Info_Error</targetReference>
        </connector>
        <flowName>CIF_Info</flowName>
        <inputAssignments>
            <name>IDNumber</name>
            <value>
                <elementReference>Get_Survey.Lead__r.Customer_ID__c</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Guarantor_Call</name>
        <label>Guarantor Call</label>
        <locationX>710</locationX>
        <locationY>924</locationY>
        <connector>
            <targetReference>Copy_1_of_Cek_Error_Guarantor</targetReference>
        </connector>
        <flowName>Guarantor_Call</flowName>
        <inputAssignments>
            <name>recordId_Application</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Recalculate</name>
        <label>Recalculate</label>
        <locationX>1205</locationX>
        <locationY>4188</locationY>
        <connector>
            <targetReference>Save_CIF_ID</targetReference>
        </connector>
        <flowName>Calculator_Call_By_Application</flowName>
        <inputAssignments>
            <name>recordId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>SaveResultToObject</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Virtual_Account_Request</name>
        <label>Virtual Account Request</label>
        <locationX>1007</locationX>
        <locationY>3480</locationY>
        <connector>
            <targetReference>Cek_Error_VA</targetReference>
        </connector>
        <flowName>Virtual_Account_Request</flowName>
        <inputAssignments>
            <name>Amount</name>
            <value>
                <elementReference>Agreement_Call.CustomerDownpaymentAmount</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>ApplicationID</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>identifierNumber</name>
            <value>
                <elementReference>AgreementNumber</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>virtualAccountName</name>
            <value>
                <elementReference>$Record.Lead__r.Customer_Name_Formula__c</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <variables>
        <name>AgreementID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>AgreementNumber</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>BankNameDisplay</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>CIFID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ConfinsCustomerID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>DebugLog</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>expiredTimeStamp</name>
        <dataType>DateTime</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>GuarantorID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>MOUNumber</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>MOUStatus</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
