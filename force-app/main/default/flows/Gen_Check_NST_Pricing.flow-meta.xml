<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>63.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Set_NST_Pricing_Admin_Fee</name>
        <label>Set NST Pricing Admin Fee</label>
        <locationX>50</locationX>
        <locationY>566</locationY>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Admin_Fee.Application__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varR_Survey.Opportunity__r.Application__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Admin_Fee.Loan_Information__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varR_Survey.Opportunity__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Admin_Fee.Survey__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varR_Survey.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Admin_Fee.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Admin Fee</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Admin_Fee.Real__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varR_Survey.Admin_Fee__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Admin_Fee.Standard__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Admin_Fee.admin_fee__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Admin_Fee.Exposure__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_CAA.Exp_Pricing__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_AdminFeeKenaNSTPricing</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Admin_Fee_to_NST_Pricing</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_NST_Pricing_Effective_Rate</name>
        <label>Set NST Pricing Effective Rate</label>
        <locationX>50</locationX>
        <locationY>1982</locationY>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Effective_Rate.Application__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varR_Survey.Opportunity__r.Application__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Effective_Rate.Loan_Information__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varR_Survey.Opportunity__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Effective_Rate.Survey__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varR_Survey.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Effective_Rate.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Effective Rate</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Effective_Rate.Real__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varR_Survey.Effective_Rate__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Effective_Rate.Standard__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>func_POTEffectiveRate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Effective_Rate.Exposure__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_CAA.Exp_Pricing__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_EffectiveRateKenaNSTPricing</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Effective_Rate_to_NST_Pricing</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_NST_Pricing_Provision_Fee</name>
        <label>Set NST Pricing Provision Fee</label>
        <locationX>50</locationX>
        <locationY>1274</locationY>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Provision_Fee.Application__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varR_Survey.Opportunity__r.Application__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Provision_Fee.Loan_Information__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varR_Survey.Opportunity__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Provision_Fee.Survey__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varR_Survey.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Provision_Fee.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Provision Fee</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Provision_Fee.Real__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varR_Survey.Provision_Fee__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Provision_Fee.Standard__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>func_POTProvisionFee</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Get_NST_Pricing_Provision_Fee.Exposure__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_CAA.Exp_Pricing__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_ProvisionFeeKenaNSTPricing</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Provision_Fee_to_NST_Pricing</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Check_NST_Pricing_Admin_Fee</name>
        <label>Check NST Pricing Admin Fee</label>
        <locationX>402</locationX>
        <locationY>566</locationY>
        <defaultConnector>
            <targetReference>Remove_Admin_Fee_from_NST_Pricing</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Empty</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_NST_Pricing_Admin_Fee</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Provision_Fee</targetReference>
            </connector>
            <label>Empty</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_NST_Pricing_Effective_Rate</name>
        <label>Check NST Pricing Effective Rate</label>
        <locationX>402</locationX>
        <locationY>1982</locationY>
        <defaultConnector>
            <targetReference>Remove_Effective_Rate_from_NST_Pricing</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Copy_2_of_Copy_2_of_Empty</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_NST_Pricing_Effective_Rate</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <label>Empty</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_NST_Pricing_Provision_Fee</name>
        <label>Check NST Pricing Provision Fee</label>
        <locationX>402</locationX>
        <locationY>1274</locationY>
        <defaultConnector>
            <targetReference>Remove_Provision_Fee_from_NST_Pricing</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Copy_2_of_Empty</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_NST_Pricing_Provision_Fee</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Effective_Rate</targetReference>
            </connector>
            <label>Empty</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Admin_Fee_lower_than_default</name>
        <label>Is Admin Fee lower than default</label>
        <locationX>226</locationX>
        <locationY>458</locationY>
        <defaultConnector>
            <targetReference>Check_NST_Pricing_Admin_Fee</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Admin_Fee_Kena_NST_Pricing</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varR_Survey.Admin_Fee__c</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>Get_Admin_Fee.admin_fee__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_NST_Pricing_Admin_Fee</targetReference>
            </connector>
            <label>Admin Fee Kena NST Pricing</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Effective_Rate_lower_than_default</name>
        <label>Is Effective Rate lower than default</label>
        <locationX>226</locationX>
        <locationY>1874</locationY>
        <defaultConnector>
            <targetReference>Check_NST_Pricing_Effective_Rate</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Effective_Rate_kena_NST_Pricing</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varR_Survey.Effective_Rate__c</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>func_POTEffectiveRate</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_NST_Pricing_Effective_Rate</targetReference>
            </connector>
            <label>Effective Rate kena NST Pricing</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Provision_Fee_lower_than_default</name>
        <label>Is Provision Fee lower than default</label>
        <locationX>226</locationX>
        <locationY>1166</locationY>
        <defaultConnector>
            <targetReference>Check_NST_Pricing_Provision_Fee</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Provision_Fee_kena_NST_Pricing</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varR_Survey.Provision_Fee__c</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>func_POTProvisionFee</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_NST_Pricing_Provision_Fee</targetReference>
            </connector>
            <label>Provision Fee kena NST Pricing</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <formulas>
        <name>func_CustomerType</name>
        <dataType>String</dataType>
        <expression>IF(TEXT({!varR_Survey.Opportunity__r.Customer__c}) == &quot;New&quot;, &quot;N&quot;, &quot;R&quot;)</expression>
    </formulas>
    <formulas>
        <name>func_NSTCategory</name>
        <dataType>String</dataType>
        <expression>IF({!var_AdminFeeKenaNSTPricing} == TRUE, &quot;Admin Fee&quot;, &quot;&quot;) &amp; 
IF({!var_AdminFeeKenaNSTPricing} == TRUE &amp;&amp; {!var_ProvisionFeeKenaNSTPricing} == TRUE, &quot;, &quot;, &quot;&quot;) &amp; 
IF({!var_ProvisionFeeKenaNSTPricing} == TRUE, &quot;Provision Fee&quot;, &quot;&quot;) &amp; 
IF(({!var_AdminFeeKenaNSTPricing} == TRUE || {!var_ProvisionFeeKenaNSTPricing} == TRUE) &amp;&amp; {!var_EffectiveRateKenaNSTPricing} == TRUE, &quot;, &quot;, &quot;&quot;) &amp; 
IF({!var_EffectiveRateKenaNSTPricing} == TRUE, &quot;Effective Rate&quot;, &quot;&quot;)</expression>
    </formulas>
    <formulas>
        <name>func_POTEffectiveRate</name>
        <dataType>Number</dataType>
        <expression>{!Get_Effective_Rate.rate__c}*100</expression>
        <scale>5</scale>
    </formulas>
    <formulas>
        <name>func_POTProvisionFee</name>
        <dataType>Number</dataType>
        <expression>{!Get_Provision_Fee.rate__c}*100</expression>
        <scale>5</scale>
    </formulas>
    <interviewLabel>[Gen] Check NST Pricing {!$Flow.CurrentDateTime}</interviewLabel>
    <label>[Gen] Check NST Pricing</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Add_Admin_Fee_to_NST_Pricing</name>
        <label>Add Admin Fee to NST Pricing</label>
        <locationX>50</locationX>
        <locationY>674</locationY>
        <connector>
            <targetReference>Get_Provision_Fee</targetReference>
        </connector>
        <inputReference>Get_NST_Pricing_Admin_Fee</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Add_Effective_Rate_to_NST_Pricing</name>
        <label>Add Effective Rate to NST Pricing</label>
        <locationX>50</locationX>
        <locationY>2090</locationY>
        <inputReference>Get_NST_Pricing_Effective_Rate</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Add_Provision_Fee_to_NST_Pricing</name>
        <label>Add Provision Fee to NST Pricing</label>
        <locationX>50</locationX>
        <locationY>1382</locationY>
        <connector>
            <targetReference>Get_Effective_Rate</targetReference>
        </connector>
        <inputReference>Get_NST_Pricing_Provision_Fee</inputReference>
    </recordCreates>
    <recordDeletes>
        <name>Remove_Admin_Fee_from_NST_Pricing</name>
        <label>Remove Admin Fee from NST Pricing</label>
        <locationX>490</locationX>
        <locationY>674</locationY>
        <connector>
            <targetReference>Get_Provision_Fee</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Admin Fee</stringValue>
            </value>
        </filters>
        <filters>
            <field>Survey__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varR_Survey.Id</elementReference>
            </value>
        </filters>
        <object>NST_Pricing__c</object>
    </recordDeletes>
    <recordDeletes>
        <name>Remove_Effective_Rate_from_NST_Pricing</name>
        <label>Remove Effective Rate from NST Pricing</label>
        <locationX>490</locationX>
        <locationY>2090</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Effective Rate</stringValue>
            </value>
        </filters>
        <filters>
            <field>Survey__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varR_Survey.Id</elementReference>
            </value>
        </filters>
        <object>NST_Pricing__c</object>
    </recordDeletes>
    <recordDeletes>
        <name>Remove_Provision_Fee_from_NST_Pricing</name>
        <label>Remove Provision Fee from NST Pricing</label>
        <locationX>490</locationX>
        <locationY>1382</locationY>
        <connector>
            <targetReference>Get_Effective_Rate</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Provision Fee</stringValue>
            </value>
        </filters>
        <filters>
            <field>Survey__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varR_Survey.Id</elementReference>
            </value>
        </filters>
        <object>NST_Pricing__c</object>
    </recordDeletes>
    <recordLookups>
        <name>Get_Admin_Fee</name>
        <label>Get Admin Fee</label>
        <locationX>226</locationX>
        <locationY>242</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_NST_Pricing_Admin_Fee</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>product_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>3</stringValue>
            </value>
        </filters>
        <filters>
            <field>ntf_max__c</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>varR_Survey.Opportunity__r.NTF_Pengajuan__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>ntf_min__c</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>varR_Survey.Opportunity__r.NTF_Pengajuan__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>customer_type__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>func_CustomerType</elementReference>
            </value>
        </filters>
        <filters>
            <field>package_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varR_Survey.Opportunity__r.Product_Offering__r.text_package_id__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Master_Admin_Fee__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_CAA</name>
        <label>Get CAA</label>
        <locationX>226</locationX>
        <locationY>134</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Admin_Fee</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Cabang__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varR_Survey.Opportunity__r.Application__r.BranchId_formula__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Exp_Pricing__c</field>
            <operator>NotEqualTo</operator>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>CAA__c</object>
        <sortField>Exp_Pricing__c</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Effective_Rate</name>
        <label>Get Effective Rate</label>
        <locationX>226</locationX>
        <locationY>1658</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_NST_Pricing_Effective_Rate</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>product_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>3</stringValue>
            </value>
        </filters>
        <filters>
            <field>package_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varR_Survey.Opportunity__r.Product_Offering__r.text_package_id__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>ntf_max__c</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>varR_Survey.Opportunity__r.NTF_Pengajuan__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>ntf_min__c</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>varR_Survey.Opportunity__r.NTF_Pengajuan__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>max_tenure__c</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>varR_Survey.Opportunity__r.Tenor__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>min_tenure__c</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>varR_Survey.Opportunity__r.Tenor__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Master_Package_Rate__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_NST_Pricing_Admin_Fee</name>
        <label>Get NST Pricing Admin Fee</label>
        <locationX>226</locationX>
        <locationY>350</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Is_Admin_Fee_lower_than_default</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Survey__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varR_Survey.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Admin Fee</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>NST_Pricing__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_NST_Pricing_Effective_Rate</name>
        <label>Get NST Pricing Effective Rate</label>
        <locationX>226</locationX>
        <locationY>1766</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Is_Effective_Rate_lower_than_default</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Survey__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varR_Survey.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Effective Rate</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>NST_Pricing__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_NST_Pricing_Provision_Fee</name>
        <label>Get NST Pricing Provision Fee</label>
        <locationX>226</locationX>
        <locationY>1058</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Is_Provision_Fee_lower_than_default</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Survey__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varR_Survey.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Provision Fee</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>NST_Pricing__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Provision_Fee</name>
        <label>Get Provision Fee</label>
        <locationX>226</locationX>
        <locationY>950</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_NST_Pricing_Provision_Fee</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>product_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>3</stringValue>
            </value>
        </filters>
        <filters>
            <field>package_id__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varR_Survey.Opportunity__r.Product_Offering__r.text_package_id__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>tenor_max__c</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>varR_Survey.Opportunity__r.Tenor__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>tenor_min__c</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>varR_Survey.Opportunity__r.Tenor__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Master_Provision_Fee__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <start>
        <locationX>100</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Get_CAA</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>var_AdminFeeKenaNSTPricing</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_EffectiveRateKenaNSTPricing</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_ProvisionFeeKenaNSTPricing</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varR_Survey</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Survey__c</objectType>
    </variables>
</Flow>
