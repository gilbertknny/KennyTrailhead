<!-- lwcMaterialList.html -->
<template>
    <lightning-card title={listTitle}>
        <div class="slds-p-around_medium">
            <!-- Search within module -->
            <div class="module-search">
                <lightning-input
                    type="search"
                    value={searchTerm}
                    onchange={handleSearchChange}
                    placeholder="Search within this module..."
                    variant="label-hidden">
                </lightning-input>
            </div>

            <!-- Materials Grid -->
            <div class="materials-grid">
                <template for:each={filteredMaterials} for:item="material">
                    <div key={material.Id} class="material-card">
                        <div class="card-header">
                            <h3 class="material-title">{material.Name}</h3>
                            <lightning-badge label={material.Module__c} class="module-badge"></lightning-badge>
                        </div>
                        
                        <div class="card-body">
                            <p class="material-description">
                                <template if:true={material.Description__c}>
                                    {material.Description__c}
                                </template>
                                <template if:false={material.Description__c}>
                                    <span class="no-description">No description available</span>
                                </template>
                            </p>
                        </div>

                        <div class="card-footer">
                            <div class="material-meta">
                                <div class="presenter-info">
                                    <lightning-icon icon-name="standard:user" size="x-small" class="meta-icon"></lightning-icon>
                                    <span class="meta-text">{material.presenterName}</span>
                                </div>
                                <div class="date-info">
                                    <lightning-icon icon-name="utility:date_input" size="x-small" class="meta-icon"></lightning-icon>
                                    <span class="meta-text">
                                        <lightning-formatted-date-time value={material.Date__c}></lightning-formatted-date-time>
                                    </span>
                                </div>
                            </div>
                            <lightning-button
                                label="View Detail"
                                variant="brand"
                                onclick={handleViewDetail}
                                data-id={material.Id}
                                class="view-detail-btn">
                            </lightning-button>
                        </div>
                    </div>
                </template>
            </div>

            <!-- No Results Message -->
            <template if:true={hasNoResults}>
                <div class="no-results">
                    <lightning-icon icon-name="utility:error" size="medium"></lightning-icon>
                    <p>No materials found</p>
                    <template if:true={searchTerm}>
                        <p class="slds-text-color_weak">Try adjusting your search term</p>
                    </template>
                </div>
            </template>

            <!-- Loading State -->
            <template if:true={isLoading}>
                <div class="loading">
                    <lightning-spinner alternative-text="Loading materials"></lightning-spinner>
                    <p>Loading materials...</p>
                </div>
            </template>
        </div>
    </lightning-card>
</template>