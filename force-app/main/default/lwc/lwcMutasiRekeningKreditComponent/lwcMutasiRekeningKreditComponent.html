<!--
    LWC Name    : lwcMutasiRekeningKreditComponent.html
    Created Date       : 03 September 2024
    @description       : This is class ..
    @author            : Rakeyan Nuramria
    Modification Log :
    Ver   Date         Author                            Modification
    1.0   06/09/2024   Rakeyan Nuramria                  Initial Version
    1.0   07/09/2024   Rakeyan Nuramria                  Adjust UI
    1.0   09/09/2024   Rakeyan Nuramria                  Add spinner and adjust UI
    1.0   21/09/2024   Rakeyan Nuramria                  Adjust UI for API & Others
    1.0   01/10/2024   Rakeyan Nuramria                  Adjust UI for create & update case
    1.0   09/10/2024   Rakeyan Nuramria                  [FROM SIT] Adjust UI to scrollable horizontally
    1.0   10/10/2024   Rakeyan Nuramria                  [FROM SIT] Adjust UI to show message if data mutasi empty
-->
<template>
    <!-- Main Card Section -->
    <div>
        <lightning-card icon-name="" variant="base" class="custom-card slds-m-around_medium slds-card_boundary">
            <div slot="title" class="slds-m-top_small slds-m-left_small">
                Pencarian Mutasi Transaksi
            </div>
            <div slot="actions">
                <template if:false={isCloseHidden}>
                    <lightning-button-icon icon-name="utility:close" alternative-text="Close" title="Close"
                        onclick={handleCloseMutasiRek} class="cssClass" variant="bare">
                    </lightning-button-icon>
                </template>
            </div>

            <!-- Card Body -->
            <div class="main-container slds-p-around_medium">
                <!-- Date Picker Section -->
                <!-- <lightning-card title="" class="custom-card slds-m-bottom_small slds-card_boundary">
                    <div class="slds-grid slds-gutters slds-wrap slds-align-middle">
                        <div class="slds-col slds-size_3-of-12 slds-m-left_small">
                            <lightning-input type="date" label="Tanggal Awal" value={startDate}
                                onchange={handleStartDateChange}></lightning-input>
                        </div>
                        <div class="slds-col slds-size_3-of-12">
                            <lightning-input type="date" label="Tanggal Akhir" value={endDate}
                                onchange={handleEndDateChange}></lightning-input>
                        </div>
                        <div class="slds-col slds-size_1-of-12 slds-align-middle" style="margin-top: 4px;">
                            <lightning-button variant="brand" label="Search" title="Search"
                                onclick={handleSearch}></lightning-button>
                        </div>
                    </div>
                </lightning-card> -->
                <!-- End Date Picker Section -->

                <!-- Spinner Section -->
                <template if:true={isLoading}>
                    <lightning-card icon-name="" variant="base">
                        <div class="slds-is-relative slds-align_absolute-center">
                            <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
                        </div>
                    </lightning-card>
                </template>

                <!-- <template if:true={showTable}> -->
                <!-- Datatable Mutasi Rekening Section -->
                <template if:false={isLoading}>

                    <template if:true={hasError}>
                        <div class="slds-text-color_error slds-m-top_medium slds-text-align_center">
                            <b>{errorMsg}</b>
                        </div>
                    </template>

                    <template if:true={filteredData.length}>
                        <lightning-card icon-name="" variant="base"
                            class="custom-card slds-m-top_xx-small slds-card_boundary">
                            <div class="slds-p-around_small slds-m-top_xx-small">
                                <div class="slds-scrollable_y custom-scroll">
                                    <table class="slds-table slds-table_bordered slds-table_fixed-layout custom-table">
                                        <thead>
                                            <tr class="slds-line-height_reset">
                                                <th scope="col" style="width: 50px;">
                                                    <div class="slds-truncate slds-text-align_center" title="Select">
                                                    </div>
                                                </th>
                                                <th scope="col">
                                                    <div class="slds-truncate" title="Tanggal Transaksi">Tanggal
                                                        Transaksi
                                                    </div>
                                                </th>
                                                <th scope="col">
                                                    <div class="slds-truncate" title="Tanggal Posting">Tanggal Posting
                                                    </div>
                                                </th>
                                                <th scope="col">
                                                    <div class="slds-truncate" title="Deskripsi Transaksi">Deskripsi
                                                        Transaksi</div>
                                                </th>
                                                <th scope="col">
                                                    <div class="slds-truncate" title="Nominal Transaksi">Nominal
                                                        Transaksi
                                                    </div>
                                                </th>
                                                <th scope="col">
                                                    <div class="slds-truncate" title="Kode Transaksi">Kode Transaksi
                                                    </div>
                                                </th>
                                                <th scope="col">
                                                    <div class="slds-truncate" title="Ref Number">Ref Number</div>
                                                </th>
                                                <th scope="col">
                                                    <div class="slds-truncate" title="Approval Code">Approval Code</div>
                                                </th>
                                                <th scope="col">
                                                    <div class="slds-truncate" title="Keterangan Response">Keterangan
                                                        Response</div>
                                                </th>
                                                <th scope="col">
                                                    <div class="slds-truncate" title="Status Transaksi">Status Transaksi
                                                    </div>
                                                </th>
                                                <th scope="col">
                                                    <div class="slds-truncate" title="Waktu Sisa Penagihan Merchant">
                                                        Waktu
                                                        Sisa Penagihan Merchant</div>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <template for:each={filteredData} for:item="row">
                                                <tr key={row.id} class="slds-hint-parent">
                                                    <td>
                                                        <lightning-input type="checkbox" data-id={row.id}
                                                            checked={row.isSelected} onchange={handleCheckboxChange}
                                                            disabled={row.isDisabled}></lightning-input>
                                                    </td>
                                                    <td>{row.cstmTglTransaksi}</td>
                                                    <td>{row.cstmTglPostingan}</td>
                                                    <!-- <td>{row.tanggalTransaksi}</td>
                                            <td>{row.tanggalPostingTransaksi}</td> -->
                                                    <td>{row.deskripsiTransaksi}</td>
                                                    <td>{row.nominalTransaksi}</td>
                                                    <td>{row.kodeTransaksi}</td>
                                                    <td>{row.refferenceNumber}</td>
                                                    <td>{row.approvalCode}</td>
                                                    <td>{row.keteranganTransaksi}</td>
                                                    <td>{row.statusTransaksi}</td>
                                                    <td>{row.waktuSisaPenagihanMerchant}</td>
                                                </tr>
                                            </template>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </lightning-card>
                    </template>
                </template>
                <!-- End Datatable Mutasi Rekening Section -->

                <!-- Create Case Button -->
                <!-- <div class="slds-m-top_medium slds-text-align_center">
                    <lightning-button variant="brand" label="Create Case" title="Create Case" onclick={handleCreateCase}
                        disabled={isCreateButtonDisabled}></lightning-button>
                </div> -->

                <div class="slds-m-top_medium slds-text-align_center">
                    <template if:true={isLoadingCreateCase}>
                        <!-- <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner> -->
                        <div class="spinner-container" style="height:6rem;position:relative">
                            <div role="status" class="slds-spinner slds-spinner_small">
                                <span class="slds-assistive-text">Loading</span>
                                <div class="slds-spinner__dot-a"></div>
                                <div class="slds-spinner__dot-b"></div>
                            </div>
                        </div>
                    </template>
                    <template if:true={showCreateCaseButton}>
                        <template if:false={isLoadingCreateCase}>
                            <lightning-button variant="brand" label="Create Case" title="Create Case"
                                onclick={handleCreateCase} disabled={isCreateButtonDisabled}>
                            </lightning-button>
                        </template>
                    </template>
                    <template if:true={isLoadingUpdateCase}>
                        <!-- <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner> -->
                        <div class="spinner-container" style="height:6rem;position:relative">
                            <div role="status" class="slds-spinner slds-spinner_small">
                                <span class="slds-assistive-text">Loading</span>
                                <div class="slds-spinner__dot-a"></div>
                                <div class="slds-spinner__dot-b"></div>
                            </div>
                        </div>
                    </template>
                    <template if:true={showUpdateCaseButton}>
                        <template if:false={isLoadingUpdateCase}>
                            <lightning-button variant="brand" label="Update Case" title="Update Case"
                                onclick={handleUpdateCase} disabled={isUpdateButtonDisabled}>
                            </lightning-button>
                        </template>
                    </template>
                </div>
                <!-- </template> -->

            </div>
        </lightning-card>
    </div>
</template>